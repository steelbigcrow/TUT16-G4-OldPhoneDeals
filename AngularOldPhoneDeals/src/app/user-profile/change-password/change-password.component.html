<section id="changePasswordPage">
  <div class="container p-5">
    <div class="row mt-5">
      <div class="col-lg-8 offset-lg-2">
        <!-- 返回按钮 -->
        <button class="btn btn-link mb-4" (click)="goBack()">← Back</button>
        
        <div class="card bg-light">
          <div class="card-body">
            <h4 class="text-center">Change Password</h4>
            <hr>

            <!-- 密码修改表单 -->
            <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()">
              <!-- 旧密码 -->
              <div class="mb-4 p-3 border-bottom">
                <label class="form-label">Current Password</label>
                <input 
                  type="password" 
                  class="form-control"
                  formControlName="oldPassword"
                  placeholder="Enter your current password"
                >
                <div *ngIf="passwordForm.get('oldPassword')?.invalid && passwordForm.get('oldPassword')?.touched" 
                    class="text-danger mt-2">
                  <div *ngIf="passwordForm.get('oldPassword')?.hasError('required')">
                    Current password is required
                  </div>
                </div>
              </div>

              <!-- 新密码 -->
              <div class="mb-4 p-3 border-bottom">
                <label class="form-label">New Password</label>
                <input 
                  type="password" 
                  class="form-control"
                  formControlName="newPassword"
                  placeholder="Enter your new password"
                >
                <div *ngIf="passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched" 
                    class="text-danger mt-2">
                  <div *ngIf="passwordForm.get('newPassword')?.hasError('required')">
                    New password is required
                  </div>
                  <div *ngIf="passwordForm.get('newPassword')?.hasError('minlength')">
                    Password must be at least 6 characters
                  </div>
                </div>
              </div>

              <!-- 确认密码 -->
              <div class="mb-4 p-3 border-bottom">
                <label class="form-label">Confirm New Password</label>
                <input 
                  type="password" 
                  class="form-control"
                  formControlName="confirmPassword"
                  placeholder="Re-enter your new password"
                >
                <div *ngIf="passwordForm.get('confirmPassword')?.invalid && passwordForm.get('confirmPassword')?.touched" 
                    class="text-danger mt-2">
                  <div *ngIf="passwordForm.get('confirmPassword')?.hasError('required')">
                    Please confirm your new password
                  </div>
                </div>
                <div *ngIf="passwordForm.hasError('mismatch') && passwordForm.get('confirmPassword')?.touched" 
                    class="text-danger mt-2">
                    Passwords do not match
                </div>
              </div>

              <hr>
              
              <!-- 提交按钮 -->
              <button 
                class="btn btn-success btn-block" 
                type="submit"
                [disabled]="!passwordForm.valid"
              >
                <i class="fas fa-key"></i> Confirm Change
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>