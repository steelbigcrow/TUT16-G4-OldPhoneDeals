<div class="container-fluid py-4">
  <div class="search-state">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <div>
        <h2 class="mb-0">
          <!-- Search results title, displaying different search conditions -->
          <span *ngIf="searchQuery">Search results: "{{ searchQuery }}"</span>
          <span *ngIf="!searchQuery && selectedBrand">{{ selectedBrand }} Phones</span>
          <span *ngIf="!searchQuery && !selectedBrand">All Phones</span>
        </h2>
        <!-- Display filter conditions -->
        <div class="mt-2 text-muted">
          <span *ngIf="selectedBrand" class="me-3">
            <strong>Brand:</strong> {{ selectedBrand }}
          </span>
          <span *ngIf="maxPrice" class="me-3">
            <strong>Max Price:</strong> Â¥{{ maxPrice }}
          </span>
          <button *ngIf="searchQuery || selectedBrand || maxPrice" 
                  class="btn btn-sm btn-outline-secondary" 
                  (click)="clearSearchFilters()">
            Clear Filters
          </button>
        </div>
      </div>
      <div class="d-flex align-items-center">
        <div class="me-3">
          <select class="form-select form-select-sm" [(ngModel)]="sortingOption" (change)="updateSorting()">
            <option value="default">Default Sorting</option>
            <option value="price_asc">Price: Low to High</option>
            <option value="price_desc">Price: High to Low</option>
            <option value="stock_asc">Stock: Low to High</option>
            <option value="stock_desc">Stock: High to Low</option>
          </select>
        </div>
        <button (click)="goToHome()" class="btn btn-outline-secondary btn-sm">
          <i class="bi bi-arrow-left me-1"></i> Back to Home
        </button>
      </div>
    </div>

    <div class="row row-cols-5 g-3">
      <div *ngIf="loadingSearch" class="col-12 text-center py-5">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
      
      <div *ngIf="!loadingSearch && searchResults.length === 0" class="col-12 text-center py-5">
        <div class="alert alert-info">
          No phones found matching the criteria. Please try different filters.
        </div>
      </div>

      <div *ngFor="let phone of searchResults" class="col">
        <app-phone-card [phone]="phone" (viewDetails)="viewPhoneDetails($event)"></app-phone-card>
      </div>
    </div>
    <app-pagination
      [totalPages]="totalPages"
      [currentPage]="currentPage"
      (pageChange)="onPageChange($event)">
    </app-pagination>
  </div>
</div> 