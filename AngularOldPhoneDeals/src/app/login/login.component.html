<section id="loginPage">
  <div class="container p-5">
    <div class="row mt-5">
      <div class="col-lg-4 offset-lg-4">
        <div class="card bg-light">
          <div class="card-body">
            <h4 class="text-center">{{ isAdminLogin ? 'Admin Login' : 'User Login' }}</h4>
            <hr>
            <form (ngSubmit)="isAdminLogin ? adminLogin() : login()" #loginForm="ngForm">
              <div class="form-group">
                <label>Email</label>
                <input type="email" name="email" class="form-control" [(ngModel)]="email" required #emailCtrl="ngModel" />
                <div *ngIf="emailCtrl.invalid && emailCtrl.touched" class="text-danger">
                  Please enter a valid email.
                </div>
              </div>
              <div class="form-group">
                <label>Password</label>
                <input type="password" name="password" class="form-control" [(ngModel)]="password" required #pwdCtrl="ngModel" />
                <div *ngIf="pwdCtrl.invalid && pwdCtrl.touched" class="text-danger">
                  Password is required.
                </div>
              </div>
              <hr>
              <div class="d-flex justify-content-between">
                <button type="submit" class="btn btn-primary btn-block" [disabled]="btnDisabled || !loginForm.valid" style="flex: 1; margin-right: 10px;">Login</button>
                <button *ngIf="!isAdminLogin"
                        type="button"
                        class="btn btn-primary btn-block"
                        (click)="navigateToRegister()"
                        style="flex: 1; margin-left: 10px;">
                  Register
                </button>
              </div>
              <button type="button"
                      (click)="toggleLoginMode()"
                      class="btn btn-link btn-block mt-2">
                {{ isAdminLogin ? 'Switch to User Login' : 'Switch to Admin Login' }}
              </button>
              <!-- 修改这里 -->
              <button type="button"
                      class="btn btn-link btn-block mt-2"
                      (click)="showForgotModal = true">
                Forgot password？
              </button>

            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- 忘记密码弹窗 -->
  <!-- 自定义模态框 -->
  <!-- 忘记密码弹窗 -->
  <div class="modal-overlay" *ngIf="showForgotModal">
    <div class="modal-box">
      <h5>Reset Password</h5>
      <p>Please enter your registered email address:</p>
      <input type="email" [(ngModel)]="resetEmail" class="form-control" placeholder="Enter email" />

      <!-- 成功提示 -->
      <div class="alert alert-success mt-2" *ngIf="resetEmailSentSuccessMessage">
        {{ resetEmailSentSuccessMessage }}
      </div>

      <div class="modal-actions mt-3 text-end">
        <button class="btn btn-secondary me-2" (click)="closeForgotModal()">Cancel</button>
        <button class="btn btn-primary" (click)="verifyEmailAndRedirect()">Next</button>
      </div>
    </div>
  </div>


</section>
